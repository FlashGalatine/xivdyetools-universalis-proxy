name = "xivdyetools-universalis-proxy"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# Development environment (default)
[vars]
ENVIRONMENT = "development"
# Allowed origins for CORS (comma-separated)
ALLOWED_ORIGINS = "http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173"
# Universalis API base URL
UNIVERSALIS_API_BASE = "https://universalis.app/api/v2"
# Rate limit: requests per minute per IP
RATE_LIMIT_REQUESTS = "60"
RATE_LIMIT_WINDOW_SECONDS = "60"

# Production environment
[env.production]
name = "xivdyetools-universalis-proxy"

[env.production.vars]
ENVIRONMENT = "production"
ALLOWED_ORIGINS = "https://xivdyetools.projectgalatine.com"
UNIVERSALIS_API_BASE = "https://universalis.app/api/v2"
RATE_LIMIT_REQUESTS = "30"
RATE_LIMIT_WINDOW_SECONDS = "60"

# KV namespaces for caching
[[kv_namespaces]]
binding = "PRICE_CACHE"
id = "a00a0c68160b4369bf6c079c99e329a8"
preview_id = "f6bf0ec4700342698e122035b3ddc49c"

[[kv_namespaces]]
binding = "STATIC_CACHE"
id = "50cc58ccd8574294a18ede9b6880e0aa"
preview_id = "e0ffc718f9f64112972a3ed705df0c9e"

# Production KV namespaces
[[env.production.kv_namespaces]]
binding = "PRICE_CACHE"
id = "a00a0c68160b4369bf6c079c99e329a8"

[[env.production.kv_namespaces]]
binding = "STATIC_CACHE"
id = "50cc58ccd8574294a18ede9b6880e0aa"
